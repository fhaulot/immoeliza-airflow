[2025-11-20T10:31:47.767+0000] {local_task_job_runner.py:123} INFO - ::group::Pre task execution logs
[2025-11-20T10:31:47.824+0000] {taskinstance.py:2613} INFO - Dependencies all met for dep_context=non-requeueable deps ti=<TaskInstance: immoeliza_pipeline.run_model_training manual__2025-11-20T00:00:00+00:00 [queued]>
[2025-11-20T10:31:47.846+0000] {taskinstance.py:2613} INFO - Dependencies all met for dep_context=requeueable deps ti=<TaskInstance: immoeliza_pipeline.run_model_training manual__2025-11-20T00:00:00+00:00 [queued]>
[2025-11-20T10:31:47.848+0000] {taskinstance.py:2866} INFO - Starting attempt 1 of 2
[2025-11-20T10:31:47.873+0000] {taskinstance.py:2889} INFO - Executing <Task(DockerOperator): run_model_training> on 2025-11-20 00:00:00+00:00
[2025-11-20T10:31:47.892+0000] {logging_mixin.py:190} WARNING - /home/***/.local/lib/python3.12/site-packages/***/task/task_runner/standard_task_runner.py:70 DeprecationWarning: This process (pid=230) is multi-threaded, use of fork() may lead to deadlocks in the child.
[2025-11-20T10:31:47.890+0000] {standard_task_runner.py:104} INFO - Running: ['***', 'tasks', 'run', 'immoeliza_pipeline', 'run_model_training', 'manual__2025-11-20T00:00:00+00:00', '--job-id', '5', '--raw', '--subdir', 'DAGS_FOLDER/immoeliza_dag.py', '--cfg-path', '/tmp/tmptpcmsngq']
[2025-11-20T10:31:47.896+0000] {standard_task_runner.py:105} INFO - Job 5: Subtask run_model_training
[2025-11-20T10:31:47.896+0000] {standard_task_runner.py:72} INFO - Started process 231 to run task
[2025-11-20T10:31:48.013+0000] {task_command.py:467} INFO - Running <TaskInstance: immoeliza_pipeline.run_model_training manual__2025-11-20T00:00:00+00:00 [running]> on host 3aa706c10241
[2025-11-20T10:31:48.156+0000] {taskinstance.py:3132} INFO - Exporting env vars: AIRFLOW_CTX_DAG_OWNER='***' AIRFLOW_CTX_DAG_ID='immoeliza_pipeline' AIRFLOW_CTX_TASK_ID='run_model_training' AIRFLOW_CTX_EXECUTION_DATE='2025-11-20T00:00:00+00:00' AIRFLOW_CTX_TRY_NUMBER='1' AIRFLOW_CTX_DAG_RUN_ID='manual__2025-11-20T00:00:00+00:00'
[2025-11-20T10:31:48.159+0000] {taskinstance.py:731} INFO - ::endgroup::
[2025-11-20T10:31:48.324+0000] {docker.py:367} INFO - Starting docker container from image immoeliza-***-model-training:latest
[2025-11-20T10:31:48.340+0000] {docker.py:375} WARNING - Using remote engine or docker-in-docker and mounting temporary volume from host is not supported. Falling back to `mount_tmp_dir=False` mode. You can set `mount_tmp_dir` parameter to False to disable mounting and remove the warning
[2025-11-20T10:31:53.177+0000] {docker.py:438} INFO - 2025-11-20 10:31:53,174 - matplotlib.font_manager - INFO - generated new fontManager
[2025-11-20T10:31:57.156+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,154 - ImmoEliza-Training - INFO - STARTING PRODUCTION TRAINING PIPELINE
[2025-11-20T10:31:57.158+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,154 - ImmoEliza-Training - INFO - STEP 1: Analysis Preprocessing
[2025-11-20T10:31:57.159+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,155 - analyse.Preprocessing - INFO - === Starting Analysis Preprocessing Pipeline ===
[2025-11-20T10:31:57.161+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,159 - analyse.Preprocessing - INFO - Loaded dataset with shape: (30, 19)
[2025-11-20T10:31:57.162+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,160 - analyse.Preprocessing - INFO - Columns: ['id', 'url', 'type', 'subtype', 'bedroomCount', 'province', 'locality', 'postCode', 'habitableSurface', 'buildingCondition', 'hasGarden', 'gardenSurface', 'hasTerrace', 'epcScore', 'price', 'hasParking', 'MunicipalityCleanName', 'region', 'price_square_meter']
[2025-11-20T10:31:57.168+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,166 - analyse.Preprocessing - INFO - Starting initial data cleaning...
[2025-11-20T10:31:57.170+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,168 - analyse.Preprocessing - INFO - Removed 0 rows with missing price or postal code
[2025-11-20T10:31:57.171+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,168 - analyse.Preprocessing - INFO - Removed price outliers, remaining rows: 30
[2025-11-20T10:31:57.172+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,169 - analyse.Preprocessing - INFO - Removed surface outliers, remaining rows: 30
[2025-11-20T10:31:57.172+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,170 - analyse.Preprocessing - INFO - Removed bedroom outliers, remaining rows: 30
[2025-11-20T10:31:57.173+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,170 - analyse.Preprocessing - INFO - Handling missing values...
[2025-11-20T10:31:57.194+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,192 - analyse.Preprocessing - INFO - Adding derived features...
[2025-11-20T10:31:57.199+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,197 - analyse.Preprocessing - INFO - Applied ordinal encoding to building condition
[2025-11-20T10:31:57.200+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,198 - analyse.Preprocessing - INFO - Applied ordinal encoding to EPC score
[2025-11-20T10:31:57.207+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,206 - analyse.Preprocessing - INFO - Applied one-hot encoding to: ['province', 'subtype', 'type', 'region']
[2025-11-20T10:31:57.209+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,206 - analyse.Preprocessing - INFO - Preparing data for analysis...
[2025-11-20T10:31:57.211+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,209 - analyse.Preprocessing - INFO - Prepared analysis dataset with 22 columns
[2025-11-20T10:31:57.212+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,209 - analyse.Preprocessing - INFO - Final shape: (30, 22)
[2025-11-20T10:31:57.217+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,215 - analyse.Preprocessing - INFO - Analysis-ready data saved to: /app/analyse/processed_for_analysis.csv
[2025-11-20T10:31:57.219+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,216 - ImmoEliza-Training - INFO - Analysis preprocessing complete. Output shape: (30, 22)
[2025-11-20T10:31:57.219+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,216 - ImmoEliza-Training - INFO - STEP 2: Model Preprocessing
[2025-11-20T10:31:57.220+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,216 - model.Preprocessing - INFO - === Starting Model Preprocessing Pipeline ===
[2025-11-20T10:31:57.221+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,218 - model.Preprocessing - INFO - Loaded dataset with shape: (30, 19)
[2025-11-20T10:31:57.222+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,218 - model.Preprocessing - INFO - Columns: ['id', 'url', 'type', 'subtype', 'bedroomCount', 'province', 'locality', 'postCode', 'habitableSurface', 'buildingCondition', 'hasGarden', 'gardenSurface', 'hasTerrace', 'epcScore', 'price', 'hasParking', 'MunicipalityCleanName', 'region', 'price_square_meter']
[2025-11-20T10:31:57.223+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,218 - model.Preprocessing - INFO - Starting model-specific data cleaning...
[2025-11-20T10:31:57.224+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,220 - model.Preprocessing - INFO - Removed 2 rows with missing critical data
[2025-11-20T10:31:57.225+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,221 - model.Preprocessing - INFO - Applied strict price filtering, remaining rows: 28
[2025-11-20T10:31:57.226+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,222 - model.Preprocessing - INFO - Applied strict surface filtering, remaining rows: 27
[2025-11-20T10:31:57.227+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,223 - model.Preprocessing - INFO - Applied bedroom filtering, remaining rows: 27
[2025-11-20T10:31:57.228+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,226 - model.Preprocessing - INFO - Removed price/sqm outliers, remaining rows: 26
[2025-11-20T10:31:57.229+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,227 - model.Preprocessing - INFO - Applied ordinal encoding to building condition
[2025-11-20T10:31:57.230+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,229 - model.Preprocessing - INFO - Applied ordinal encoding to EPC score
[2025-11-20T10:31:57.231+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,229 - model.Preprocessing - INFO - Preparing features for ML model...
[2025-11-20T10:31:57.237+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,235 - model.Preprocessing - INFO - Selected 7 numeric and 6 categorical features
[2025-11-20T10:31:57.237+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,235 - model.Preprocessing - INFO - Feature columns: ['habitableSurface', 'bedroomCount', 'postCode', 'hasGarden', 'gardenSurface', 'hasTerrace', 'hasParking', 'type', 'subtype', 'province', 'region', 'buildingCondition', 'epcScore']
[2025-11-20T10:31:57.238+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,235 - model.Preprocessing - INFO - Encoding categorical columns: ['type', 'subtype', 'province', 'region']
[2025-11-20T10:31:57.244+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,242 - model.Preprocessing - INFO - Final encoded shape: (26, 22)
[2025-11-20T10:31:57.247+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,245 - model.Preprocessing - INFO - Train set shape: (20, 22)
[2025-11-20T10:31:57.248+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,245 - model.Preprocessing - INFO - Test set shape: (6, 22)
[2025-11-20T10:31:57.251+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,249 - model.Preprocessing - INFO - Fitted scaler on training data
[2025-11-20T10:31:57.258+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,256 - model.Preprocessing - INFO - Saved scaler to /app/model/processed_data/scaler.pkl
[2025-11-20T10:31:57.260+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,257 - model.Preprocessing - INFO - Saved feature columns to /app/model/processed_data/feature_columns.csv
[2025-11-20T10:31:57.261+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,257 - model.Preprocessing - INFO - Model-ready data saved to: /app/model/processed_data
[2025-11-20T10:31:57.262+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,257 - model.Preprocessing - INFO - Final feature count: 22
[2025-11-20T10:31:57.262+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,258 - ImmoEliza-Training - INFO - Model preprocessing complete.
[2025-11-20T10:31:57.263+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,258 - ImmoEliza-Training - INFO - Training set: (20, 22), Test set: (6, 22)
[2025-11-20T10:31:57.264+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,258 - ImmoEliza-Training - INFO - STEP 3: Model Training
[2025-11-20T10:31:57.265+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,259 - model.pipeline - INFO - Created 5 model pipelines
[2025-11-20T10:31:57.265+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,259 - model.pipeline - INFO - Training and evaluating models...
[2025-11-20T10:31:57.266+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,259 - model.pipeline - INFO - Training Linear Regression...
[2025-11-20T10:31:57.320+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,318 - model.pipeline - INFO -   Linear Regression - Test R²: 0.9933, Test MAE: 11248
[2025-11-20T10:31:57.321+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,318 - model.pipeline - INFO - Training Ridge Regression...
[2025-11-20T10:31:57.399+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,397 - model.pipeline - INFO -   Ridge Regression - Test R²: 0.8918, Test MAE: 47427
[2025-11-20T10:31:57.400+0000] {docker.py:438} INFO - 2025-11-20 10:31:57,397 - model.pipeline - INFO - Training Random Forest...
[2025-11-20T10:31:58.585+0000] {docker.py:438} INFO - 2025-11-20 10:31:58,583 - model.pipeline - INFO -   Random Forest - Test R²: 0.8567, Test MAE: 57229
[2025-11-20T10:31:58.586+0000] {docker.py:438} INFO - 2025-11-20 10:31:58,583 - model.pipeline - INFO - Training Gradient Boosting...
[2025-11-20T10:31:59.181+0000] {docker.py:438} INFO - 2025-11-20 10:31:59,178 - model.pipeline - INFO -   Gradient Boosting - Test R²: 0.7949, Test MAE: 34169
[2025-11-20T10:31:59.182+0000] {docker.py:438} INFO - 2025-11-20 10:31:59,179 - model.pipeline - INFO - Training Polynomial Regression...
[2025-11-20T10:31:59.256+0000] {docker.py:438} INFO - 2025-11-20 10:31:59,253 - model.pipeline - INFO -   Polynomial Regression - Test R²: 0.7853, Test MAE: 42676
[2025-11-20T10:31:59.257+0000] {docker.py:438} INFO - 2025-11-20 10:31:59,254 - model.pipeline - INFO - Best model: Linear Regression with R² = 0.9933
[2025-11-20T10:31:59.259+0000] {docker.py:438} INFO - 2025-11-20 10:31:59,254 - ImmoEliza-Training - INFO - Model training complete. Best model: Linear Regression
[2025-11-20T10:31:59.260+0000] {docker.py:438} INFO - 2025-11-20 10:31:59,256 - model.pipeline - INFO - Saved best model (Linear Regression) to /app/model/trained_models/best_model.pkl
[2025-11-20T10:31:59.262+0000] {docker.py:438} INFO - 2025-11-20 10:31:59,259 - model.pipeline - INFO - Saved model metadata to /app/model/trained_models/model_metadata.csv
[2025-11-20T10:31:59.331+0000] {docker.py:438} INFO - 2025-11-20 10:31:59,328 - model.pipeline - INFO - Saved all models to /app/model/trained_models/all_models
[2025-11-20T10:31:59.335+0000] {docker.py:438} INFO - 2025-11-20 10:31:59,333 - model.pipeline - INFO - Saved detailed results to /app/model/trained_models/detailed_results.csv
[2025-11-20T10:31:59.336+0000] {docker.py:438} INFO - 2025-11-20 10:31:59,333 - ImmoEliza-Training - INFO - Models saved to /app/model/trained_models
[2025-11-20T10:31:59.338+0000] {docker.py:438} INFO - 2025-11-20 10:31:59,333 - ImmoEliza-Training - INFO - TRAINING PIPELINE COMPLETED SUCCESSFULLY
[2025-11-20T10:31:59.339+0000] {docker.py:438} INFO - <class 'pandas.core.frame.DataFrame'>
[2025-11-20T10:31:59.340+0000] {docker.py:438} INFO - RangeIndex: 30 entries, 0 to 29
[2025-11-20T10:31:59.341+0000] {docker.py:438} INFO - Data columns (total 19 columns):
[2025-11-20T10:31:59.343+0000] {docker.py:438} INFO -  #   Column                 Non-Null Count  Dtype  
[2025-11-20T10:31:59.344+0000] {docker.py:438} INFO - ---  ------                 --------------  -----  
[2025-11-20T10:31:59.346+0000] {docker.py:438} INFO -  0   id                     30 non-null     float64
[2025-11-20T10:31:59.347+0000] {docker.py:438} INFO -  1   url                    30 non-null     object 
[2025-11-20T10:31:59.348+0000] {docker.py:438} INFO -  2   type                   30 non-null     object 
[2025-11-20T10:31:59.349+0000] {docker.py:438} INFO -  3   subtype                30 non-null     object 
[2025-11-20T10:31:59.350+0000] {docker.py:438} INFO -  4   bedroomCount           30 non-null     float64
[2025-11-20T10:31:59.351+0000] {docker.py:438} INFO -  5   province               30 non-null     object 
[2025-11-20T10:31:59.352+0000] {docker.py:438} INFO -  6   locality               30 non-null     int64  
[2025-11-20T10:31:59.353+0000] {docker.py:438} INFO -  7   postCode               30 non-null     int64  
[2025-11-20T10:31:59.354+0000] {docker.py:438} INFO -  8   habitableSurface       28 non-null     float64
[2025-11-20T10:31:59.355+0000] {docker.py:438} INFO -  9   buildingCondition      2 non-null      object 
[2025-11-20T10:31:59.356+0000] {docker.py:438} INFO -  10  hasGarden              30 non-null     int64  
[2025-11-20T10:31:59.356+0000] {docker.py:438} INFO -  11  gardenSurface          30 non-null     float64
[2025-11-20T10:31:59.357+0000] {docker.py:438} INFO -  12  hasTerrace             30 non-null     int64  
[2025-11-20T10:31:59.359+0000] {docker.py:438} INFO -  13  epcScore               27 non-null     object 
[2025-11-20T10:31:59.360+0000] {docker.py:438} INFO -  14  price                  30 non-null     float64
[2025-11-20T10:31:59.360+0000] {docker.py:438} INFO -  15  hasParking             30 non-null     int64  
[2025-11-20T10:31:59.361+0000] {docker.py:438} INFO -  16  MunicipalityCleanName  30 non-null     int64  
[2025-11-20T10:31:59.363+0000] {docker.py:438} INFO -  17  region                 30 non-null     object 
[2025-11-20T10:31:59.364+0000] {docker.py:438} INFO -  18  price_square_meter     28 non-null     float64
[2025-11-20T10:31:59.365+0000] {docker.py:438} INFO - dtypes: float64(6), int64(6), object(7)
[2025-11-20T10:31:59.366+0000] {docker.py:438} INFO - memory usage: 4.6+ KB
[2025-11-20T10:31:59.367+0000] {docker.py:438} INFO - None
[2025-11-20T10:32:00.322+0000] {taskinstance.py:340} INFO - ::group::Post task execution logs
[2025-11-20T10:32:00.328+0000] {taskinstance.py:352} INFO - Marking task as SUCCESS. dag_id=immoeliza_pipeline, task_id=run_model_training, run_id=manual__2025-11-20T00:00:00+00:00, execution_date=20251120T000000, start_date=20251120T103147, end_date=20251120T103200
[2025-11-20T10:32:00.420+0000] {local_task_job_runner.py:266} INFO - Task exited with return code 0
[2025-11-20T10:32:00.481+0000] {taskinstance.py:3895} INFO - 0 downstream tasks scheduled from follow-on schedule check
[2025-11-20T10:32:00.487+0000] {local_task_job_runner.py:245} INFO - ::endgroup::
